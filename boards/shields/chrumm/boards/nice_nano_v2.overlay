

&pro_micro_spi {
    status = "okay";

    /* Latch (STCP) on D4 / P0.22 */
    cs-gpios = <&pro_micro 4 GPIO_ACTIVE_LOW>;

    shifter: 595@0 {
        compatible = "zmk,gpio-595";
        status = "okay";
        gpio-controller;
        #gpio-cells = <2>;

        /* SPI device address on the bus */
        reg = <0>;

        /* Conservative SPI speed for 74HC595 */
        spi-max-frequency = <200000>;

        /* 2 × 74HC595 daisy-chained → 16 outputs */
        ngpios = <16>;
    };
};